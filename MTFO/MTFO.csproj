<Project Sdk="Microsoft.NET.Sdk" InitialTargets="ValidateGamePath">
  <!--
    Add a GameFolder.props file to the project to set your game path:
    <Project>
      <PropertyGroup>
        <GameFolder>C:\Program Files (x86)\Steam\steamapps\common\GTFO</GameFolder>
      </PropertyGroup>
    </Project>
  -->

  <Import Project="GameFolder.props" Condition="Exists('./GameFolder.props')" />
  <Target Name="ValidateGamePath">
    <Error Text="The GameFolder property must be set to the GTFO game folder." Condition="'$(GameFolder)' == '' or !Exists('$(GameFolder)')" />
  </Target>
  <PropertyGroup>
    <BIELibsFolder>$(GameFolder)/BepInEx/core</BIELibsFolder>
    <MonoLibsFolder>$(GameFolder)/mono/Managed</MonoLibsFolder>
    <UnhollowedLibsFolder>$(GameFolder)/BepInEx/unhollowed</UnhollowedLibsFolder>
    <TargetFrameworks>netstandard2.1</TargetFrameworks>
    <RootNamespace>MTFO</RootNamespace>
    <LangVersion>preview</LangVersion>
    <Copyright>© dakkhuza 2021</Copyright>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
    <Version>4.1.0</Version>
    <VersionPrerelease>pre</VersionPrerelease>
    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="$(MonoLibsFolder)/Microsoft.CSharp.dll" Private="false" />
    <Reference Include="$(BIELibsFolder)/*.dll" Private="false" />
    <Reference Include="$(UnhollowedLibsFolder)/*.dll" Private="false" />
    <Reference Remove="$(UnhollowedLibsFolder)/Newtonsoft.Json.dll" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="ILRepack.Lib.MSBuild" Version="2.1.16.1" PrivateAssets="all" />
    <PackageReference Include="VersionInfoGenerator" Version="2.0.0" PrivateAssets="all" />
    <PackageReference Include="Newtonsoft.Json" Version="12.0.3" />
  </ItemGroup>
  <ItemGroup>
    <EmbeddedAssembly Include="$(OutputPath)/Newtonsoft.Json.dll" />
  </ItemGroup>
  <ItemGroup>
    <Compile Update="ConfigStrings.Designer.cs">
      <DesignTime>True</DesignTime>
      <AutoGen>True</AutoGen>
      <DependentUpon>ConfigStrings.resx</DependentUpon>
    </Compile>
  </ItemGroup>
  <ItemGroup>
    <EmbeddedResource Update="ConfigStrings.resx">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>ConfigStrings.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>
</Project>